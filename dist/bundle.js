(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(e){return e<10?"0"+e:e}function a(){const e=function(){const e=(new Date("01/20/2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t}}();e.seconds>=0?(t.textContent=r(e.hours),n.textContent=r(e.minutes),o.textContent=r(e.seconds)):(t.textContent="00",n.textContent="00",o.textContent="00")}a(),setInterval(a,1e3)})(),(()=>{const e=document.querySelector("menu"),t=document.querySelector("body"),n=document.getElementById("service-block"),o=document.getElementById("portfolio"),r=document.getElementById("calc"),a=document.getElementById("command"),c=document.getElementById("connect"),l=()=>{e.classList.toggle("active-menu")};t.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("menu")||t.closest(".menu"))l();else{if(!t.classList.contains("close-btn"))return"A"===t.tagName&&t.closest(".active-menu")&&"Наши услуги"===t.textContent?(e.preventDefault(),l(),void n.scrollIntoView({behavior:"smooth"})):"A"===t.tagName&&t.closest(".active-menu")&&"Портфолио"===t.textContent?(e.preventDefault(),l(),void o.scrollIntoView({behavior:"smooth"})):"A"===t.tagName&&t.closest(".active-menu")&&"Калькулятор стоимости"===t.textContent?(e.preventDefault(),l(),void r.scrollIntoView({behavior:"smooth"})):"A"===t.tagName&&t.closest(".active-menu")&&"Наша команда"===t.textContent?(e.preventDefault(),l(),void a.scrollIntoView({behavior:"smooth"})):"A"===t.tagName&&t.closest(".active-menu")&&"Остались вопросы?"===t.textContent?(e.preventDefault(),l(),void c.scrollIntoView({behavior:"smooth"})):void(document.getElementsByClassName(".active-menu").length>0&&(t.classList.contains(".active-menu")||l()));l()}}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content");let o,r=0;const a=function(){o=requestAnimationFrame(a),r+=10,r<500?n.style.top=-385+r+"px":(r=0,cancelAnimationFrame(o))};t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",document.documentElement.clientWidth>768&&(n.style.top="-385px",o=requestAnimationFrame(a))}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,r)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),n=document.querySelector(".portfolio-content");let o,r=0;const a=(e,t,n)=>{e[t].classList.remove(n)},c=(e,t,n)=>{e[t].classList.add(n)},l=()=>{a(e,r,"portfolio-item-active"),a(t,r,"dot-active"),r++,r>=e.length&&(r=0),c(e,r,"portfolio-item-active"),c(t,r,"dot-active")},s=(e=3e3)=>{o=setInterval(l,e)};n.addEventListener("click",(n=>{n.preventDefault();const o=n.target;o.matches(".portfolio-btn, .dot")&&(a(e,r,"portfolio-item-active"),a(t,r,"dot-active"),o.matches("#arrow-right")?r++:o.matches("#arrow-left")?r--:o.matches(".dot")&&t.forEach(((e,t)=>{e===o&&(r=t)})),r>=e.length?r=0:r<0&&(r=e.length-1),c(e,r,"portfolio-item-active"),c(t,r,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(2e3)})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total");t.addEventListener("change",(t=>{const l=t.target;t.target.matches(".calc-square, .calc-count, .calc-day")&&(t.target.value=t.target.value.replace(/\D/g,"")),l.matches(".calc-type, .calc-square, .calc-count, .calc-day")&&(()=>{let t=0,l=1,s=1;const i=n.options[n.selectedIndex].value,m=+o.value;a.value>1&&(l+=(a.value-1)/10),r.value&&r.value<5?s*=2:r.value&&r.value<10&&(s*=1.5),i&&m&&(t=e*i*m*l*s),(({timing:e,draw:t,duration:n})=>{const o=performance.now();requestAnimationFrame((function r(a){let c=(a-o)/n;c>1&&(c=1);const l=e(c);t(l),c<1&&requestAnimationFrame(r)}))})({duration:1e3,timing:e=>e,draw(e){c.textContent=Math.floor(e*t)}})})()}))})(),(()=>{const e=document.querySelector("body"),t=()=>{let e;"IMG"===event.target.tagName&&void 0!==event.target.dataset.img&&(e=event.target.src,event.target.src=event.target.dataset.img,event.target.dataset.img=e)};e.addEventListener("mouseover",t),e.addEventListener("mouseout",t)})(),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),o=document.querySelector("body"),r=document.createElement("div");((e="+7 (___) ___-__-__")=>{const t=document.querySelectorAll(".form-phone");function n(t){t.target.style.backgroundColor="white";const n=t.keyCode,o=e,r=o.replace(/\D/g,""),a=this.value.replace(/\D/g,"");let c=0,l=o.replace(/[_\d]/g,(e=>c<a.length?a.charAt(c++)||r.charAt(c):e));c=l.indexOf("_"),-1!==c&&(l=l.slice(0,c));let s=o.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");s=new RegExp("^"+s+"$"),(!s.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=l),"blur"===t.type&&this.value.length<5&&(this.value="")}for(const e of t)e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)})("+7 ___ ___-__-__"),(()=>{const e=[...document.querySelectorAll(".form-name"),document.querySelector("#form2-name")];for(const t of e)t.addEventListener("input",(e=>{t.style.backgroundColor="white",e.target.value=e.target.value.replace(/[^А-ЯЁа-яё ]/g,"")}))})(),(()=>{const e=document.querySelectorAll(".form-email");for(const t of e)t.addEventListener("input",(e=>{t.style.backgroundColor="white",e.target.value=e.target.value.replace(/[^a-zA-Z0-9.@!#$%&+_-]*$/,"")}))})(),document.getElementById("form2-message").addEventListener("input",(e=>{e.target.style.backgroundColor="white",e.target.value=e.target.value.replace(/[^?!,.а-яА-ЯёЁ0-9\s]+$/g,"")})),o.addEventListener("submit",(o=>{o.preventDefault();const a=o.target;if(console.log(a.querySelector(".form-name")),a.matches(".footer-form")&&a.querySelector(".top-form").value.length<2)a.querySelector(".top-form").value="",a.querySelector(".top-form").style.backgroundColor="red";else if(!a.matches(".footer-form")&&a.querySelector(".form-name").value.length<2)a.querySelector(".form-name").value="",a.querySelector(".form-name").style.backgroundColor="red";else if(""===a.querySelector(".form-email").value)a.querySelector(".form-email").style.backgroundColor="red";else if(a.classList.contains("footer-form")&&""===a.querySelector("#form2-message").value)a.querySelector("#form2-message").style.backgroundColor="red";else if(a.querySelector(".form-phone").value.length<10)a.querySelector(".form-phone").value="",a.querySelector(".form-phone").style.backgroundColor="red";else{const o={};let c,l;r.innerHTML='\n            <div class="spinner">\n                <div class="rect1"></div>\n                <div class="rect2"></div>\n                <div class="rect3"></div>\n                <div class="rect4"></div>\n                <div class="rect5"></div>\n            </div>\n            <style type="text/css">\n            .spinner {\n                    margin: 100px auto;\n                width: 50px;\n                height: 40px;\n                text-align: center;\n                font-size: 10px;\n            }\n          \n            .spinner > div {\n                background-color: #05C8FF;\n                height: 100%;\n                width: 6px;\n                display: inline-block;\n            \n                -webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out;\n                animation: sk-stretchdelay 1.2s infinite ease-in-out;\n            }\n          \n            .spinner .rect2 {\n                -webkit-animation-delay: -1.1s;\n                animation-delay: -1.1s;\n            }\n          \n            .spinner .rect3 {\n                -webkit-animation-delay: -1.0s;\n                animation-delay: -1.0s;\n            }\n          \n             .spinner .rect4 {\n                -webkit-animation-delay: -0.9s;\n                animation-delay: -0.9s;\n            }\n          \n            .spinner .rect5 {\n                -webkit-animation-delay: -0.8s;\n                animation-delay: -0.8s;\n            }\n          \n            @-webkit-keyframes sk-stretchdelay {\n                0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  \n                20% { -webkit-transform: scaleY(1.0) }\n            }\n          \n            @keyframes sk-stretchdelay {\n                0%, 40%, 100% { \n                 transform: scaleY(0.4);\n                -webkit-transform: scaleY(0.4);\n             }  20% { \n                  transform: scaleY(1.0);\n                  -webkit-transform: scaleY(1.0);\n                }\n            }\n            </style>',a===e?(l=e,c=new FormData(e),e.appendChild(r)):a===t?(l=t,c=new FormData(t),t.appendChild(r)):a===n&&(l=n,c=new FormData(n),n.appendChild(r)),c.forEach(((e,t)=>{o[t]=e})),((e,t)=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"applicatin/json"},body:JSON.stringify(t)}))(0,o).then((e=>{if(200!==e.status)throw new Error("Network status is not 200");l.reset(),r.style.cssText="font-size: 2rem;",r.style.color="#FFFFFF",r.textContent="Спасибо! Мы скоро с вами свяжемся!",setTimeout((()=>r.remove()),5e3)})).catch((e=>{r.style.cssText="font-size: 2rem;",r.textContent="Что-то пошло не так...",console.error(e)}))}}))})(),(()=>{const e=document.querySelector("main").querySelectorAll("img"),t=document.getElementById("service-block");e[3].addEventListener("click",(e=>{e.preventDefault(),t.scrollIntoView({behavior:"smooth"})}))})()})();