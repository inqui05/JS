(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),a=document.querySelector("#timer-seconds");function o(e){return e<10?"0"+e:e}function c(){const e=function(){const e=(new Date("01/20/2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t}}();e.seconds>=0?(t.textContent=o(e.hours),n.textContent=o(e.minutes),a.textContent=o(e.seconds)):(t.textContent="00",n.textContent="00",a.textContent="00")}c(),setInterval(c,1e3)})(),(()=>{const e=document.querySelector("menu"),t=document.querySelector("body"),n=()=>{e.classList.toggle("active-menu")};t.addEventListener("click",(e=>{const t=e.target;t.classList.contains("menu")||t.closest(".menu")||t.classList.contains("close-btn")||"LI"===t.tagName&&t.closest(".active-menu")||"A"===t.tagName&&t.closest(".active-menu")?n():document.getElementsByClassName(".active-menu").length>0&&(t.classList.contains(".active-menu")||n())}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content");let a,o=0;const c=function(){a=requestAnimationFrame(c),o+=10,o<500?n.style.top=-385+o+"px":(o=0,cancelAnimationFrame(a))};t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",document.documentElement.clientWidth>768&&(n.style.top="-385px",a=requestAnimationFrame(c))}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let a=e.target;a=a.closest(".service-header-tab"),a&&t.forEach(((e,o)=>{e===a&&(e=>{for(let a=0;a<n.length;a++)e===a?(t[a].classList.add("active"),n[a].classList.remove("d-none")):(t[a].classList.remove("active"),n[a].classList.add("d-none"))})(o)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),n=document.querySelector(".portfolio-content");let a,o=0;const c=(e,t,n)=>{e[t].classList.remove(n)},r=(e,t,n)=>{e[t].classList.add(n)},s=()=>{c(e,o,"portfolio-item-active"),c(t,o,"dot-active"),o++,o>=e.length&&(o=0),r(e,o,"portfolio-item-active"),r(t,o,"dot-active")},l=(e=3e3)=>{a=setInterval(s,e)};n.addEventListener("click",(n=>{n.preventDefault();const a=n.target;a.matches(".portfolio-btn, .dot")&&(c(e,o,"portfolio-item-active"),c(t,o,"dot-active"),a.matches("#arrow-right")?o++:a.matches("#arrow-left")?o--:a.matches(".dot")&&t.forEach(((e,t)=>{e===a&&(o=t)})),o>=e.length?o=0:o<0&&(o=e.length-1),r(e,o,"portfolio-item-active"),r(t,o,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&l()})),l(2e3)})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),o=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("change",(t=>{const s=t.target;t.target.matches(".calc-square, .calc-count, .calc-day")&&(t.target.value=t.target.value.replace(/\D/g,"")),s.matches(".calc-type, .calc-square, .calc-count, .calc-day")&&(()=>{let t=0,s=1,l=1;const i=n.options[n.selectedIndex].value,d=+a.value;c.value>1&&(s+=(c.value-1)/10),o.value&&o.value<5?l*=2:o.value&&o.value<10&&(l*=1.5),i&&d&&(t=e*i*d*s*l),(({timing:e,draw:t,duration:n})=>{const a=performance.now();requestAnimationFrame((function o(c){let r=(c-a)/n;r>1&&(r=1);const s=e(r);t(s),r<1&&requestAnimationFrame(o)}))})({duration:1e3,timing:e=>e,draw(e){r.textContent=Math.floor(e*t)}})})()}))})(),(()=>{const e=document.querySelector("body"),t=()=>{let e;"IMG"===event.target.tagName&&void 0!==event.target.dataset.img&&(e=event.target.src,event.target.src=event.target.dataset.img,event.target.dataset.img=e)};e.addEventListener("mouseover",t),e.addEventListener("mouseout",t)})(),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),a=document.querySelector("body"),o=document.createElement("div");((e="+7 (___) ___-__-__")=>{const t=document.querySelectorAll(".form-phone");function n(t){const n=t.keyCode,a=e,o=a.replace(/\D/g,""),c=this.value.replace(/\D/g,"");let r=0,s=a.replace(/[_\d]/g,(e=>r<c.length?c.charAt(r++)||o.charAt(r):e));r=s.indexOf("_"),-1!==r&&(s=s.slice(0,r));let l=a.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");l=new RegExp("^"+l+"$"),(!l.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=s),"blur"===t.type&&this.value.length<5&&(this.value="")}for(const e of t)e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)})("+7 ___ ___-__-__"),(()=>{const e=[...document.querySelectorAll(".form-name"),document.querySelector("#form2-name")];for(const t of e)t.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^А-ЯЁа-яё ]/g,"")}))})(),(()=>{const e=document.querySelectorAll(".form-email");for(const t of e)t.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^a-zA-Z0-9.@!#$%&+_-]*$/,"")}))})(),document.getElementById("form2-message").addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^?!,.а-яА-ЯёЁ0-9\s]+$/g,"")})),a.addEventListener("submit",(a=>{a.preventDefault();const c=a.target,r={};let s,l;o.innerHTML='\n        <div class="spinner">\n            <div class="rect1"></div>\n            <div class="rect2"></div>\n            <div class="rect3"></div>\n            <div class="rect4"></div>\n            <div class="rect5"></div>\n        </div>\n        <style type="text/css">\n        .spinner {\n            margin: 100px auto;\n            width: 50px;\n            height: 40px;\n            text-align: center;\n            font-size: 10px;\n          }\n          \n          .spinner > div {\n            background-color: #05C8FF;\n            height: 100%;\n            width: 6px;\n            display: inline-block;\n            \n            -webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out;\n            animation: sk-stretchdelay 1.2s infinite ease-in-out;\n          }\n          \n          .spinner .rect2 {\n            -webkit-animation-delay: -1.1s;\n            animation-delay: -1.1s;\n          }\n          \n          .spinner .rect3 {\n            -webkit-animation-delay: -1.0s;\n            animation-delay: -1.0s;\n          }\n          \n          .spinner .rect4 {\n            -webkit-animation-delay: -0.9s;\n            animation-delay: -0.9s;\n          }\n          \n          .spinner .rect5 {\n            -webkit-animation-delay: -0.8s;\n            animation-delay: -0.8s;\n          }\n          \n          @-webkit-keyframes sk-stretchdelay {\n            0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  \n            20% { -webkit-transform: scaleY(1.0) }\n          }\n          \n          @keyframes sk-stretchdelay {\n            0%, 40%, 100% { \n              transform: scaleY(0.4);\n              -webkit-transform: scaleY(0.4);\n            }  20% { \n              transform: scaleY(1.0);\n              -webkit-transform: scaleY(1.0);\n            }\n          }\n       </style>',c===e?(l=e,s=new FormData(e),e.appendChild(o)):c===t?(l=t,s=new FormData(t),t.appendChild(o)):c===n&&(l=n,s=new FormData(n),n.appendChild(o)),s.forEach(((e,t)=>{r[t]=e})),((e,t)=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"applicatin/json"},body:JSON.stringify(t)}))(0,r).then((e=>{if(200!==e.status)throw new Error("Network status is not 200");l.reset(),o.style.cssText="font-size: 2rem;",o.style.color="#FFFFFF",o.textContent="Спасибо! Мы скоро с вами свяжемся!",setTimeout((()=>o.remove()),5e3)})).catch((e=>{o.style.cssText="font-size: 2rem;",o.textContent="Что-то пошло не так...",console.error(e)}))}))})()})();