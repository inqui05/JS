(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function a(e){return e<10?"0"+e:e}function c(){const e=function(){const e=(new Date("01/20/2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t}}();e.seconds>=0?(t.textContent=a(e.hours),n.textContent=a(e.minutes),o.textContent=a(e.seconds)):(t.textContent="00",n.textContent="00",o.textContent="00")}c(),setInterval(c,1e3)})(),(()=>{const e=document.querySelector("menu"),t=document.querySelector("body"),n=document.getElementById("service-block"),o=document.getElementById("portfolio"),a=document.getElementById("calc"),c=document.getElementById("command"),r=document.getElementById("connect"),s=()=>{e.classList.toggle("active-menu")};t.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("menu")||t.closest(".menu"))s();else{if(!t.classList.contains("close-btn"))return"A"===t.tagName&&t.closest(".active-menu")&&"Наши услуги"===t.textContent?(e.preventDefault(),s(),void n.scrollIntoView({behavior:"smooth"})):"A"===t.tagName&&t.closest(".active-menu")&&"Портфолио"===t.textContent?(e.preventDefault(),s(),void o.scrollIntoView({behavior:"smooth"})):"A"===t.tagName&&t.closest(".active-menu")&&"Калькулятор стоимости"===t.textContent?(e.preventDefault(),s(),void a.scrollIntoView({behavior:"smooth"})):"A"===t.tagName&&t.closest(".active-menu")&&"Наша команда"===t.textContent?(e.preventDefault(),s(),void c.scrollIntoView({behavior:"smooth"})):"A"===t.tagName&&t.closest(".active-menu")&&"Остались вопросы?"===t.textContent?(e.preventDefault(),s(),void r.scrollIntoView({behavior:"smooth"})):void(document.getElementsByClassName(".active-menu").length>0&&(t.classList.contains(".active-menu")||s()));s()}}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content");let o,a=0;const c=function(){o=requestAnimationFrame(c),a+=10,a<500?n.style.top=-385+a+"px":(a=0,cancelAnimationFrame(o))};t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",document.documentElement.clientWidth>768&&(n.style.top="-385px",o=requestAnimationFrame(c))}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,a)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(a)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),n=document.querySelector(".portfolio-content");let o,a=0;const c=(e,t,n)=>{e[t].classList.remove(n)},r=(e,t,n)=>{e[t].classList.add(n)},s=()=>{c(e,a,"portfolio-item-active"),c(t,a,"dot-active"),a++,a>=e.length&&(a=0),r(e,a,"portfolio-item-active"),r(t,a,"dot-active")},l=(e=3e3)=>{o=setInterval(s,e)};n.addEventListener("click",(n=>{n.preventDefault();const o=n.target;o.matches(".portfolio-btn, .dot")&&(c(e,a,"portfolio-item-active"),c(t,a,"dot-active"),o.matches("#arrow-right")?a++:o.matches("#arrow-left")?a--:o.matches(".dot")&&t.forEach(((e,t)=>{e===o&&(a=t)})),a>=e.length?a=0:a<0&&(a=e.length-1),r(e,a,"portfolio-item-active"),r(t,a,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&l()})),l(2e3)})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("change",(t=>{const s=t.target;t.target.matches(".calc-square, .calc-count, .calc-day")&&(t.target.value=t.target.value.replace(/\D/g,"")),s.matches(".calc-type, .calc-square, .calc-count, .calc-day")&&(()=>{let t=0,s=1,l=1;const i=n.options[n.selectedIndex].value,d=+o.value;c.value>1&&(s+=(c.value-1)/10),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),i&&d&&(t=e*i*d*s*l),(({timing:e,draw:t,duration:n})=>{const o=performance.now();requestAnimationFrame((function a(c){let r=(c-o)/n;r>1&&(r=1);const s=e(r);t(s),r<1&&requestAnimationFrame(a)}))})({duration:1e3,timing:e=>e,draw(e){r.textContent=Math.floor(e*t)}})})()}))})(),(()=>{const e=document.querySelector("body"),t=()=>{let e;"IMG"===event.target.tagName&&void 0!==event.target.dataset.img&&(e=event.target.src,event.target.src=event.target.dataset.img,event.target.dataset.img=e)};e.addEventListener("mouseover",t),e.addEventListener("mouseout",t)})(),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),o=document.querySelector("body"),a=document.createElement("div");((e="+7 (___) ___-__-__")=>{const t=document.querySelectorAll(".form-phone");function n(t){const n=t.keyCode,o=e,a=o.replace(/\D/g,""),c=this.value.replace(/\D/g,"");let r=0,s=o.replace(/[_\d]/g,(e=>r<c.length?c.charAt(r++)||a.charAt(r):e));r=s.indexOf("_"),-1!==r&&(s=s.slice(0,r));let l=o.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");l=new RegExp("^"+l+"$"),(!l.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=s),"blur"===t.type&&this.value.length<5&&(this.value="")}for(const e of t)e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)})("+7 ___ ___-__-__"),(()=>{const e=[...document.querySelectorAll(".form-name"),document.querySelector("#form2-name")];for(const t of e)t.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^А-ЯЁа-яё ]/g,"")}))})(),(()=>{const e=document.querySelectorAll(".form-email");for(const t of e)t.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^a-zA-Z0-9.@!#$%&+_-]*$/,"")}))})(),document.getElementById("form2-message").addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^?!,.а-яА-ЯёЁ0-9\s]+$/g,"")})),o.addEventListener("submit",(o=>{o.preventDefault();const c=o.target;if(""===c.querySelector(".form-email").value)c.querySelector(".form-email").style.backgroundColor="red";else{const o={};let r,s;a.innerHTML='\n            <div class="spinner">\n                <div class="rect1"></div>\n                <div class="rect2"></div>\n                <div class="rect3"></div>\n                <div class="rect4"></div>\n                <div class="rect5"></div>\n            </div>\n            <style type="text/css">\n            .spinner {\n                    margin: 100px auto;\n                width: 50px;\n                height: 40px;\n                text-align: center;\n                font-size: 10px;\n            }\n          \n            .spinner > div {\n                background-color: #05C8FF;\n                height: 100%;\n                width: 6px;\n                display: inline-block;\n            \n                -webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out;\n                animation: sk-stretchdelay 1.2s infinite ease-in-out;\n            }\n          \n            .spinner .rect2 {\n                -webkit-animation-delay: -1.1s;\n                animation-delay: -1.1s;\n            }\n          \n            .spinner .rect3 {\n                -webkit-animation-delay: -1.0s;\n                animation-delay: -1.0s;\n            }\n          \n             .spinner .rect4 {\n                -webkit-animation-delay: -0.9s;\n                animation-delay: -0.9s;\n            }\n          \n            .spinner .rect5 {\n                -webkit-animation-delay: -0.8s;\n                animation-delay: -0.8s;\n            }\n          \n            @-webkit-keyframes sk-stretchdelay {\n                0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  \n                20% { -webkit-transform: scaleY(1.0) }\n            }\n          \n            @keyframes sk-stretchdelay {\n                0%, 40%, 100% { \n                 transform: scaleY(0.4);\n                -webkit-transform: scaleY(0.4);\n             }  20% { \n                  transform: scaleY(1.0);\n                  -webkit-transform: scaleY(1.0);\n                }\n            }\n            </style>',c===e?(s=e,r=new FormData(e),e.appendChild(a)):c===t?(s=t,r=new FormData(t),t.appendChild(a)):c===n&&(s=n,r=new FormData(n),n.appendChild(a)),r.forEach(((e,t)=>{o[t]=e})),((e,t)=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"applicatin/json"},body:JSON.stringify(t)}))(0,o).then((e=>{if(200!==e.status)throw new Error("Network status is not 200");s.reset(),a.style.cssText="font-size: 2rem;",a.style.color="#FFFFFF",a.textContent="Спасибо! Мы скоро с вами свяжемся!",setTimeout((()=>a.remove()),5e3)})).catch((e=>{a.style.cssText="font-size: 2rem;",a.textContent="Что-то пошло не так...",console.error(e)}))}}))})(),(()=>{const e=document.querySelector("main").querySelectorAll("img"),t=document.getElementById("service-block");e[3].addEventListener("click",(e=>{e.preventDefault(),t.scrollIntoView({behavior:"smooth"})}))})()})();